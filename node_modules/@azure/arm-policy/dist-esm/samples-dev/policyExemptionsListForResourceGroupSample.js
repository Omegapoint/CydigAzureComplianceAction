/*
 * Copyright (c) Microsoft Corporation.
 * Licensed under the MIT License.
 *
 * Code generated by Microsoft (R) AutoRest Code Generator.
 * Changes may cause incorrect behavior and will be lost if the code is regenerated.
 */
import { __asyncValues, __awaiter } from "tslib";
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT License.
import { PolicyClient } from "@azure/arm-policy";
import { DefaultAzureCredential } from "@azure/identity";
import * as dotenv from "dotenv";
dotenv.config();
/**
 * This sample demonstrates how to This operation retrieves the list of all policy exemptions associated with the given resource group in the given subscription that match the optional given $filter. Valid values for $filter are: 'atScope()', 'atExactScope()', 'excludeExpired()' or 'policyAssignmentId eq '{value}''. If $filter is not provided, the unfiltered list includes all policy exemptions associated with the resource group, including those that apply directly or apply from containing scopes, as well as any applied to resources contained within the resource group.
 *
 * @summary This operation retrieves the list of all policy exemptions associated with the given resource group in the given subscription that match the optional given $filter. Valid values for $filter are: 'atScope()', 'atExactScope()', 'excludeExpired()' or 'policyAssignmentId eq '{value}''. If $filter is not provided, the unfiltered list includes all policy exemptions associated with the resource group, including those that apply directly or apply from containing scopes, as well as any applied to resources contained within the resource group.
 * x-ms-original-file: specification/resources/resource-manager/Microsoft.Authorization/preview/2020-07-01-preview/examples/listPolicyExemptionsForResourceGroup.json
 */
function listPolicyExemptionsThatApplyToAResourceGroup() {
    var _a, e_1, _b, _c;
    return __awaiter(this, void 0, void 0, function* () {
        const subscriptionId = process.env["POLICY_SUBSCRIPTION_ID"] ||
            "ae640e6b-ba3e-4256-9d62-2993eecfa6f2";
        const resourceGroupName = process.env["POLICY_RESOURCE_GROUP"] || "TestResourceGroup";
        const filter = "atScope()";
        const options = {
            filter
        };
        const credential = new DefaultAzureCredential();
        const client = new PolicyClient(credential, subscriptionId);
        const resArray = new Array();
        try {
            for (var _d = true, _e = __asyncValues(client.policyExemptions.listForResourceGroup(resourceGroupName, options)), _f; _f = yield _e.next(), _a = _f.done, !_a;) {
                _c = _f.value;
                _d = false;
                try {
                    let item = _c;
                    resArray.push(item);
                }
                finally {
                    _d = true;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (!_d && !_a && (_b = _e.return)) yield _b.call(_e);
            }
            finally { if (e_1) throw e_1.error; }
        }
        console.log(resArray);
    });
}
function main() {
    return __awaiter(this, void 0, void 0, function* () {
        listPolicyExemptionsThatApplyToAResourceGroup();
    });
}
main().catch(console.error);
//# sourceMappingURL=policyExemptionsListForResourceGroupSample.js.map